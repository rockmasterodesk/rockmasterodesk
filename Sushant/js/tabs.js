!function(t){var e={};function n(i){if(e[i])return e[i].exports;var a=e[i]={i:i,l:!1,exports:{}};return t[i].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)n.d(i,a,function(e){return t[e]}.bind(null,a));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/",n(n.s=0)}({0:function(t,e,n){n(1),t.exports=n(10)},1:function(t,e){function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var a=function(){function t(e){var i=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};n(this,t),this.tabs=[],this.active=0,this.wrapNames=!1,this.disabledInput=[],this.key=void 0!==a.key?a.key:"room_id",this.onActivateTab=void 0!==a.onActivateTab?a.onActivateTab:function(){},this.onScrolledToTop=void 0!==a.onScrolledToTop?a.onScrolledToTop:function(){},this.sendMessageInputSelector=void 0!==a.sendMessageInputSelector?a.sendMessageInputSelector:"#SendMessageInput",this.$MessageInput=document.querySelector(this.sendMessageInputSelector),null!==this.$MessageInput&&this.$MessageInput.addEventListener("input",(function(t){i.syncInputWithData(t,i)})),this.addTab(e),__this__=this,$(document).ready((function(){"large"===window.deviceSize?$("#MessagesContainer").getNiceScroll(0).scrollend((function(t){t.current.y<=50&&__this__.onScrolledToTop(__this__.getCurrentTab())})):$("#MessagesContainer").scroll((function(t){0===$("#MessagesContainer").scrollTop()&&__this__.onScrolledToTop(__this__.getCurrentTab())}))}))}var e,a,s;return e=t,(a=[{key:"getTabs",value:function(){return this.tabs}},{key:"addTab",value:function(t){var e=this,n=!1,i=-1,a=0;this.tabs.forEach((function(s){s[e.key]===t[e.key]&&(n=!0,i=a),a++})),n?this.active!==i&&this.activateTab(i):(void 0===t.input&&(t.input=""),void 0===t.input&&(t.new_message_count=0),this.tabs.push(t),this.active=this.tabs.length-1,this.$MessageInput.value=t.input,this.tabs.length>5&&(this.wrapNames=!0),this.toggleTabbedView(),this.generateTabCode(),this.checkInputDisability(),void 0!==this.onActivateTab&&this.onActivateTab(t))}},{key:"closeTab",value:function(t){0!==t&&(this.tabs.splice(t,1),this.tabs.length<=5&&(this.wrapNames=!1),this.active==t?0!=this.active?this.activateTab(this.active-1):this.activateTab(0):t<this.active?this.activateTab(this.active-1,!1):(this.toggleTabbedView(),this.generateTabCode(),this.checkInputDisability()))}},{key:"activateTab",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.active!==t&&(this.active=t,this.$MessageInput.value=this.tabs[this.active].input,this.tabs[this.active].new_message_count=0,this.toggleTabbedView(),this.generateTabCode(),this.checkInputDisability(),e&&this.onActivateTab(this.tabs[t]))}},{key:"toggleTabbedView",value:function(){this.tabs.length>1?(document.querySelector(".person-header").classList.add("display-none"),document.querySelector(".person-header-tabbed").classList.remove("display-none")):(this.active=0,document.querySelector(".person-header").classList.remove("display-none"),document.querySelector(".person-header-tabbed").classList.add("display-none"))}},{key:"setCountNotification",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;isNaN(e)||e<0||("string"==typeof t&&(t=this.getTabIndexByRoomID(t)),"number"==typeof t&&t>-1&&(this.active===t||(this.tabs[t].new_message_count=e,this.generateTabCode())))}},{key:"removeCountNotification",value:function(t){this.setCountNotification(t,0)}},{key:"syncInputWithData",value:function(t,e){e.tabs[e.active].input=t.target.value}},{key:"clearCurrentTabInput",value:function(){this.$MessageInput.value="",this.tabs[this.active].input=""}},{key:"getTabIndexByRoomID",value:function(t){return this.tabs.findIndex((function(e){return e.room_id===t}))}},{key:"clearInputByTabID",value:function(t){var e=!1;"string"==typeof t&&(t=this.getTabIndexByRoomID(t)),"number"==typeof t&&t>-1&&(this.tabs[t].input="",e=this.active===t),e&&(this.$MessageInput.value="")}},{key:"disableTabInputByTabId",value:function(t){null!==t&&this.disabledInput.push(t),this.checkInputDisability()}},{key:"enableTabInputByTabId",value:function(t){null!==t&&(this.disabledInput=this.disabledInput.filter((function(e){return e!==t}))),this.checkInputDisability()}},{key:"checkInputDisability",value:function(){var t=this;this.disabledInput.findIndex((function(e){return e===t.getCurrentTab().room_id}))>-1?this.$MessageInput.setAttribute("disabled","true"):this.$MessageInput.removeAttribute("disabled")}},{key:"showLoadingIcon",value:function(){$(".messages-container").prepend('\n\t\t\t<div class="loading-icon">\n\t\t\t\t<div class="spinner-border text-default" role="status">\n\t\t\t\t\t<span class="sr-only">Loading...</span>\n\t\t\t\t</div><br />\n\t\t\t</div>\n\t\t')}},{key:"hideLoadingIcon",value:function(){$(".messages-container > .loading-icon").remove()}},{key:"generateTabCode",value:function(){var t=this;if(this.tabs.length<2){var e='\t<div class="name content">\n\t\t\t\t\t\t\t\t\t<i class="fa fa-bars" id="DetailsOpenerBars" style="margin-right:5px;"></i>'.concat(this.tabs[0].name,'\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class="product-image sidebar">\n\t\t\t\t\t\t\t\t\t').concat("null"!=this.tabs[0].image?'<img src="'.concat(this.tabs[0].image,'" alt="Profile Picture">'):"<div class='no-image' ".concat(null!=this.tabs[0].color&&null!=this.tabs[0].color?'style="background:#'+this.tabs[0].color+'"':"",">").concat(this.tabs[0].name.slice(0,1),"</div>"),"\n\t\t\t\t\t\t\t\t</div>");'<div class="tab flex-custom">'.concat(e,"</div>"),document.querySelector(".person-header").innerHTML=e,document.querySelector(".person-header-tabbed").innerHTML=e}else{var n="",i=0;this.tabs.forEach((function(e){n+='<div class="tab flex-custom '.concat(i==t.active?"active":"",'" data-index="').concat(i,'">\n\t\t\t\t\t\t\t\t\t\t<div class="product-image sidebar">\n\t\t\t\t\t\t\t\t\t\t\t').concat("null"!=e.image?'<img src="'.concat(e.image,'" alt="Profile Picture">'):"<div class='no-image' ".concat(null!=e.color&&null!=e.color?'style="background:#'+e.color+'"':"",">").concat(e.name.slice(0,1),"</div>"),"\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t").concat(0===i?'<i class="fa fa-bars" id="DetailsOpenerBars" style="margin-right:5px;"></i>':"",'\n\t\t\t\t\t\t\t\t\t\t<div class="name content">\n\t\t\t\t\t\t\t\t\t\t\t').concat(t.wrapNames?e.name.indexOf(" ")>0&&e.name.indexOf(" ")<10?e.name.slice(0,e.name.indexOf(" ")):e.name.slice(0,6):e.name,'\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div class="new_message_count').concat(e.new_message_count>0?" hasCount":"",'">\n\t\t\t\t\t\t\t\t\t\t\t<div class="count_icon">').concat(e.new_message_count,"</div>  \n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t").concat(0!==i?'<div class="closer sidebar">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<button class="btn close-button" data-close=\''.concat(i,'\'><i class="fa fa-times"></i></button>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>'):"","\n\t\t\t\t\t\t\t\t\t</div>"),i++})),document.querySelector(".person-header-tabbed").innerHTML=n}}},{key:"scrollToBottom",value:function(){"small"===window.deviceSize?$("#MessagesContainer").animate({scrollTop:$("#MessagesContainer").height()},200):$("#MessagesContainer").getNiceScroll(0).doScrollTop($("#MessagesContainer").height())}},{key:"getCurrentTab",value:function(){return this.tabs[this.active]}},{key:"addScrolledToTopListener",value:function(t){"function"==typeof t&&(this.onScrolledToTop=t)}}])&&i(e.prototype,a),s&&i(e,s),t}();window.MessageTabs=a},10:function(t,e){}});
//# sourceMappingURL=tabs.js.map