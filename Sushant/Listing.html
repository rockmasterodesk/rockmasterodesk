<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="fontawesome/css/all.min.css">
    <link rel="stylesheet" href="css/style.css">
    <style type="text/css">
      .navbar a.nav-link {
        color:white;
      }
      .navbar a.nav-link:hover {
        text-decoration:underline;
      }
    </style>


    <title>SpeakSpike</title>
  </head>
  <body>
    <div class="listing-page">
      <section class="site-header">
        <div class="container-fluid">
          <div class="flex-div">
            <div class="flex-grow-1">
              <div class="logo">SpeakSpike</div>
            </div>
            <div class="right-contents flex-div">
              <div class="flex-div search-form" id="searchForm">
                <form>
                  <input class="form-control search-input" placeholder="Search" />
                </form>
              </div>
              <button class="btn icon-btn" id="searchIcon">
                <i class="fa fa-sm fa-search"></i>
              </button>
              <!-- Authenticated Users Header Icons - START -->
              <div class="notifications-container user-authenticated-options">
                <button class="btn icon-btn" id="notificationsOpener">
                  <i class="fa fa-sm fa-bell"></i>
                </button>
                <div class="counter">
                  2
                </div>
                <div class="notifications">
                  <div class="titles">
                      <h6>Notifications</h6>
                  </div>
                  <div class="list">
                    <a href="#">
                      <div class="single-notification unread">
                        <div class="sidebar nopic">
                          <p style='background-color:#ccc'>A</p>
                        </div>
                        <div class="content">
                          <div class="body">
                            <strong>Andrew Gustavo</strong> has sent you a new message.
                          </div>
                          <div class="time">
                            10 minutes ago
                          </div>
                        </div>
                      </div>
                    </a>
                    <a href="#">
                      <div class="single-notification unread">
                        <div class="sidebar propic">
                          <img src="images/man_avatar1.jpg" alt="Profile Picture">
                        </div>
                        <div class="content">
                          <div class="body">
                            <strong>Andrew Gustavo</strong> added you as contacts.
                          </div>
                          <div class="actions">
                            <button class="btn btn-contacts green"><i class="fa fa-check"></i></button>
                            <button class="btn btn-contacts red"><i class="fa fa-times"></i></button>
                          </div>
                          <div class="time">
                            10 minutes ago
                          </div>
                        </div>
                      </div>
                    </a>
                    <a href="#">
                      <div class="single-notification">
                        <div class="sidebar nopic">
                          <p style='background-color:#ccc'>N</p>
                        </div>
                        <div class="content">
                          <div class="body">
                            You might be interested in chatroom <strong>"NY - 15425"</strong>
                          </div>
                          <div class="time">
                            3 hours ago
                          </div>
                        </div>
                      </div>
                    </a>
                  </div>
                </div>
              </div>
              <div class="dropdown user-authenticated-options">
                <!-- <button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                  Dropdown button
                </button> -->
                <button class="btn dropdown-toggle icon-btn" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                  <i class="fa fa-sm fa-cog"></i>
                </button>
                <div class="dropdown-menu dropdown-menu-right" aria-labelledby="dropdownMenuButton">
                  <a class="dropdown-item" href="#">Action</a>
                  <a class="dropdown-item" href="#">Another action</a>
                  <a class="dropdown-item" href="#">Something else here</a>
                </div>
              </div>
              <div class="user-info ml-2 flex-div user-authenticated-options">
                <div class="user-propic-mobile"> <!-- Only for mobile display -->
                  <!-- <img src="images/man_avatar1.jpg" /> -->
                  <div class="nopic">
                    A
                  </div>
                </div>
                <div class="name">Asaduzzaman</div> <!-- Only for desktop display -->
              </div>
              <!-- Authenticated Users Header Icons - END -->
              <!-- Login/Signup Links - START -->
              <nav class="navbar navbar-expand">
                <div class="collapse navbar-collapse" id="navbarNav">
                  <ul class="navbar-nav">
                    <li class="nav-item">
                      <a class="nav-link" href="#">Login</a>
                    </li>
                    <li class="nav-item">
                      <a class="nav-link" href="#">Sign Up</a>
                    </li>
                  </ul>
                </div>
              </nav>
              <!-- Login/Signup Links - END -->
            </div>
          </div>
        </div>
      </section>

      <section class="search-box">
        <div class="container">
          <div class="input-group mb-3">
            <div class="input-group-prepend">
              <i class="fa fa-search-location"></i>
            </div>
            <input autocomplete="off" id="searchInput" type="text" class="form-control" placeholder="Search posts or Locations" aria-label="Search posts or Locations" aria-describedby="basic-addon2">
            <div class="input-group-append">
              <button class="btn" type="button" id="searchButton">Find</button>
            </div>
          </div>
          <div class="search-results">
            <!-- <a href="#"> -->
                <div class="single pl-3 flex-custom">
                  Search Suggestion
                </div>
            <!-- </a> -->
          </div>
        </div>
      </section>

      <section class="zip-listings">
        <div class="container">

          <h5 class="section-title">Nearby Locations</h5>
          <div class="row listing-page">
            <div class="col-md-3 col-sm-6">
              <a href="#">
                <div class="single-zip-code">
                  <div class="logo-container">
                    <div class="logo">M</div>
                  </div>
                  <div class="room-details">
                    <div class="location">
                      <span>94041</span> 
                      <span>-</span>
                      <span>Mountain View</span> 
                    </div>
                    <div class="users">
                      <span>(200 users)</span>
                    </div>
                  </div>
                </div>
              </a>
            </div>
            <div class="col-md-3 col-sm-6">
              <a href="#">
                <div class="single-zip-code">
                  <div class="logo-container">
                    <div class="logo">M</div>
                  </div>
                  <div class="room-details">
                    <div class="location">
                      <span>94041</span> 
                      <span>-</span>
                      <span>Mountain View</span> 
                    </div>
                    <div class="users">
                      <span>(200 users)</span>
                    </div>
                  </div>
                </div>
              </a>
            </div>
            <div class="col-md-3 col-sm-6">
              <a href="#">
                <div class="single-zip-code">
                  <div class="logo-container">
                    <div class="logo">M</div>
                  </div>
                  <div class="room-details">
                    <div class="location">
                      <span>94041</span> 
                      <span>-</span>
                      <span>Mountain View</span> 
                    </div>
                    <div class="users">
                      <span>(200 users)</span>
                    </div>
                  </div>
                </div>
              </a>
            </div>
            <div class="col-md-3 col-sm-6">
              <a href="#">
                <div class="single-zip-code">
                  <div class="logo-container">
                    <div class="logo">M</div>
                  </div>
                  <div class="room-details">
                    <div class="location">
                      <span>94041</span> 
                      <span>-</span>
                      <span>Mountain View</span> 
                    </div>
                    <div class="users">
                      <span>(200 users)</span>
                    </div>
                  </div>
                </div>
              </a>
            </div>
          </div>


          <h5 class="section-title">Trending</h5>
          <div class="row" id="PostsContainer">
            <script>
              var posts = [
                {
                  title: "Attention! All users.",
                  summary: "This <span class='matched'>is a</span> sticky post.",
                  time: "2 hours ago",
                  location: "West Palm Beach, FL",
                  channels: ["Attention", "Notice"],
                  votes: 125,
                  image: "image-1.png",
                },
                {
                  title: "Post Title.",
                  summary: "This <span class='matched'>is a</span> simple post including only texts",
                  time: "2 hours ago",
                  location: "California",
                  channels: ["Post", "Title", "More"],
                  votes: 54,
                  image: "image-2.jpg",
                },
                {
                  title: "A post that contains image and comments",
                  summary: "This post dynamically created and it has image and comments.",
                  time: "2 hours ago",
                  location: "Miami",
                  channels: ["Post", "Title", "More"],
                  votes: 54,
                  image: "image-3.webp",
                },
                {
                  title: "Post with lots of comments",
                  summary: "This post has lots of comments",
                  time: "2 hours ago",
                  location: "Kolkata",
                  channels: ["Post", "Title", "More"],
                  votes: 54
                },
                {
                  title: "Post with lots of comments",
                  summary: "This post has lots of comments",
                  time: "2 hours ago",
                  location: "New Delhi",
                  channels: ["Post", "Title", "More"],
                  votes: 54
                },
              ];
              for(post of posts){
                var has_image = (Math.round(Math.random() * 10) % 2) === 0;
                var channelsHTML = post.channels.map((c)=>{return "<a href=\"#\" class=\"single-channel\">"+c+"</a>"}).join("\n");
                // console.log(channelsHTML);
                document.write(`
                <div class="col-md-12 col-sm-12">
                    <div class="single-zip-code">
                      <div class="post-details">
                        <div class="title">
                          <a href="#" title="${post.title}">${post.title.substring(0,30)} ${post.title.length > 30 ? "..." : ""}</a>
                        </div>
                        <div class="summary">
                          <span class="d-none d-md-block" comment="Large screens">${post.summary.substring(0,150)} ${post.summary.length > 150 ? "..." : ""}</span>
                          <span class="d-block d-sm-none" comment="Small screens">${post.summary.substring(0,60)} ${post.summary.length > 60 ? "..." : ""}</span>
                        </div>
                        <div class="posted_in">
                          Posted In <a href="#">Location Name</a>
                        </div>
                        <div class="channels">
                          ${post.channels.length > 0 ? channelsHTML : ''}
                        </div>
                        <div class="details">
                          ${post.votes} votes · ${post.votes-10} comments · ${post.time}
                        </div>
                      </div>
                      ${post.image !== undefined ? `<div class="logo-container"><a href=""><img src="images/${post.image}" class="logo"></a></div>` : ''}
                    </div>
                </div>
                `);
              }
            </script>
          </div>
        </div>
      </section>
    </div>


    <script src="jquery/jquery.min.js"></script>
    <script src="https://unpkg.com/@popperjs/core@2"></script>
    <script src="jquery.nicescroll/jquery.nicescroll.min.js"></script>
    <script src="bootstrap/js/bootstrap.bundle.min.js"></script>
    <script src="js/listing.js"></script>
    <script src="js/notifications.js"></script>
    <script>
      $(function(){
        $(window).on("scroll", function() {
          var scrollHeight = $(document).height();
          var scrollPosition = $(window).height() + $(window).scrollTop();
          if ((scrollHeight - scrollPosition) / scrollHeight <= 0.001) {



            // WRITE YOUR CODE HERE

            console.log('Scrolled to bottom of body');
            $('body').append('<center>Scrolled to bottom of body</center><br />');
            // You may append new post like the following
            // $('#PostsContainer').append('New Post HTML...');
            // Or via an AJAX call

            // YOUR CODE ENDS HERE
          }
        });
      });
    </script>
  </body>
</html>